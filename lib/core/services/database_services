import 'package:cloud_firestore/cloud_firestore.dart';

class DatabaseService {
  final CollectionReference contactsCollection =
      FirebaseFirestore.instance.collection('contacts');

  // Ajouter un contact
  Future<void> addContact(String name, String email, String phone) async {
    try {
      await contactsCollection.add({
        'name': name,
        'email': email,
        'phone': phone,
        'createdAt': FieldValue.serverTimestamp(),
      });
    } catch (e) {
      print("Erreur lors de l'ajout du contact : $e");
    }
  }

  // Récupérer tous les contacts (stream)
  Stream<QuerySnapshot> getContacts() {
    return contactsCollection.orderBy('createdAt', descending: true).snapshots();
  }

  // Supprimer un contact
  Future<void> deleteContact(String docId) async {
    try {
      await contactsCollection.doc(docId).delete();
    } catch (e) {
      print("Erreur lors de la suppression : $e");
    }
  }
}
